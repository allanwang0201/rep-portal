<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="au.com.jaycar.mdm.mapping.RelatedProductsMapper">
  <resultMap id="BaseResultMap" type="au.com.jaycar.mdm.entity.RelatedProducts">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Oct 17 16:20:33 AEDT 2017.
    -->

	<result column="Source" jdbcType="VARCHAR" property="sourcecode" />
    <result column="Target" jdbcType="VARCHAR" property="targetcode" />
    <result column="Relationtype" jdbcType="VARCHAR" property="relationtype" />
  </resultMap>
  
  
  <select id="selectByCode" parameterType="String" resultMap="BaseResultMap">
		      Select
              products.Code As Source,
              products1.Code As Target,
              enumerationvalues.Code as Relationtype
              From
              products Inner Join
              productreferences On products.PK = productreferences.p_source Inner Join
              products products1 On productreferences.p_target = products1.PK Left Join
              enumerationvalues On productreferences.p_referencetype = enumerationvalues.PK
              Where
              products.Code = #{code,jdbcType=VARCHAR} And
              products.p_catalogversion = '8796093284953';
              
  </select>
  
 
</mapper>